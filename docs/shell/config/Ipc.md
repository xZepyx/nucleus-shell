# IPC Api Documentation

## Overview

This file defines a global IPC scope responsible for handling external commands that affect appearance and theme behavior.

It acts as the bridge between:

* External IPC calls
* Theme switching logic
* Color generation scripts
* Notification feedback

It does not store persistent state.
It orchestrates runtime actions.

---

# Architectural Role

This scope functions as:

1. Global IPC command receiver
2. Theme toggle controller
3. Color regeneration trigger
4. User feedback notifier

All external theme-related actions flow through this layer.

---

# IPC Target: "global"

Commands sent to the "global" IPC target are handled here.

Primary responsibilities:

* Toggle light/dark theme
* Regenerate Material colors

This centralizes theme-related operations and prevents scattered script calls.

---

# Theme Toggle Behavior

When a theme toggle is requested:

Case 1 — Predefined theme:

* Validates that the selected scheme has the required light/dark variant
* If missing, shows a notification and aborts
* If valid, updates config and runs the theme switch script

Case 2 — Autogenerated theme:

* Directly toggles the theme value
* Triggers color regeneration process

This ensures safe switching without breaking predefined themes.

---

# Color Regeneration

When regeneration is requested:

* If the theme is autogenerated → runs generation script
* If using predefined theme → shows a notification instead

This prevents unsupported operations on static themes.

---

# Process: Color Generation

The `Process` object runs the color generation script with:

* Current wallpaper path
* Selected Matugen scheme
* Current theme (light/dark)
* Matugen config path

This produces a new Material color JSON file, which is then consumed by the MaterialColors singleton.

---

# Notification Handling

If a user attempts unsupported actions on predefined themes:

* A desktop notification is shown
* It is displayed only once per session to prevent spam

---

# Summary

This scope is the runtime controller for theme and color operations.

It ensures:

* Safe predefined theme handling
* Controlled autogenerated theme generation
* Centralized IPC command routing
* Clean separation between configuration and execution

